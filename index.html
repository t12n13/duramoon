<!doctype html>
<!-- Version 1.0.0: 初期公開（フォロー機能のみ） -->
<!-- Version 2.10 : プロフィールモーダルに「一言」追加、タブ機能、ギャラリー対応 -->
<!-- Version 2.11 : フォロータブ切替時にカードが表示されない不具合を修正 -->
<!-- Version 2.11: フォロータブ切替時のカード再描画バグ修正 -->
<!-- Version 2.12 : ドゥラ・ムーン公式の写真URL拡張子を.jpgに変更 -->
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Follow Hub｜メンバー公式SNSまとめ</title>
<style>
  :root{ --fg:#111; --muted:#6b7280; --bg:#fafafa; --card:#fff; --line:#e5e7eb }
  *{box-sizing:border-box}
  body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--fg); background:var(--bg); margin:0}
  .wrap{max-width:1000px; margin:0 auto; padding:20px}
  header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin:6px 0 18px}
  header h1{font-size:1.25rem; margin:0}
  header .note{font-size:.9rem; color:var(--muted)}
  .grid{display:grid; grid-template-columns: repeat(1, minmax(0,1fr)); gap:14px}
  @media(min-width:700px){ .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
  @media(min-width:1024px){ .grid{ grid-template-columns: repeat(3, minmax(0,1fr)); } }
  .card{background:var(--card); border:1px solid var(--line); border-radius:14px; padding:14px}
  .head{display:flex; align-items:center; gap:12px; margin-bottom:10px}
  .avatar{width:54px; height:54px; border-radius:50%; object-fit:cover; border:1px solid var(--line); background:#ddd}
  .names{display:flex; flex-direction:column}
  .names .display{font-weight:600}
  .names .handle{color:var(--muted); font-size:.9rem}
  .btns{display:grid; grid-template-columns:1fr 1fr; gap:8px}
  .btn{display:flex; align-items:center; justify-content:center; gap:10px; padding:12px 10px; border-radius:12px; border:1px solid var(--line); text-decoration:none; color:var(--fg); background:#fff; font-weight:600}
  .btn svg{width:18px; height:18px}
  .btn:hover{filter:brightness(0.98)}
  .btn.fill{background:#111; color:#fff; border-color:#111}
  .bar{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
  .bar .openall{font-size:.9rem; color:#0369a1; text-decoration:underline; background:none; border:none; padding:6px 4px; cursor:pointer}
  .tag{font-size:.78rem; color:var(--muted)}
  footer{color:var(--muted); font-size:.86rem; margin:22px 6px}
  .version{position:fixed; top:4px; left:6px; font-size:.8rem; color:var(--muted)}
  .tabs{display:flex; gap:10px; margin-bottom:16px;}
  .tab{padding:6px 12px; border-radius:20px; border:1px solid var(--line); background:#fff; cursor:pointer;}
  .tab.active{background:#111; color:#fff; border-color:#111}
</style>
<script>
  const MEMBERS = [
    { display: "ドゥラ・ムーン公式", aka: "公式", avatar: "https://raw.githubusercontent.com/t12n13/duramoon/main/image/duramoon.jpg", x: "Duramoon__info", ig: "duramoon__info", tiktok: "duramoon_idol" },
    { display: "髏黯 メア", aka: "ろあん めあ", avatar: "https://raw.githubusercontent.com/t12n13/duramoon/main/image/mea.jpg", x: "mea__dura", ig: "roamea_", tiktok: "roamea_" },
    { display: "琥珀 トワ", aka: "こはく とわ", avatar: "https://raw.githubusercontent.com/t12n13/duramoon/main/image/towa.jpg", x: "towa__dura", ig: "15milk01c", tiktok: "tow4_nyan" },
    { display: "御伽 望愛", aka: "おとぎ のあ", avatar: "https://raw.githubusercontent.com/t12n13/duramoon/main/image/noa.jpg", x: "noa__dura", ig: "_1984180", tiktok: "n0q1_o14" },
    { display: "終宵 ねお", aka: "おしまい ねお", avatar: "https://raw.githubusercontent.com/t12n13/duramoon/main/image/neo.jpg", x: "neo__dura", ig: "ponkotsuneotaro_", tiktok: "ponkotsuneotaro" },
    { display: "死喰 ちる", aka: "しくい ちる", avatar: "https://raw.githubusercontent.com/t12n13/duramoon/main/image/chill.jpg", x: "chill__dura", ig: "xx_nyqn2_xx", tiktok: "xx_nyan2_xx" }
  ];

  const isIOS = /iP(hone|od|ad)/.test(navigator.userAgent);
  const isAndroid = /Android/.test(navigator.userAgent);

  function openWithFallback(appUrl, webUrl){
    if(!(isIOS || isAndroid)){ window.open(webUrl, '_blank'); return; }
    const t = Date.now();
    window.location.href = appUrl;
    setTimeout(() => { if(Date.now() - t < 1600){ window.location.href = webUrl; } }, 1200);
  }

  function linksetFor(member){
    const links = [];
    if(member.x){ links.push({ key:'x', label:'Xでフォロー', href:`https://twitter.com/intent/follow?screen_name=${encodeURIComponent(member.x)}`, open:(e)=>window.open(`https://twitter.com/intent/follow?screen_name=${encodeURIComponent(member.x)}`,'_blank') }); }
    if(member.ig){ const app=`instagram://user?username=${member.ig}`, web=`https://www.instagram.com/${member.ig}/`; links.push({ key:'ig', label:'Instagramを開く', href:'#', open:(e)=>openWithFallback(app,web) }); }
    if(member.tiktok){ const app=`snssdk1128://user/profile/@${member.tiktok}`, web=`https://www.tiktok.com/@${member.tiktok}`; links.push({ key:'tt', label:'TikTokを開く', href:'#', open:(e)=>openWithFallback(app,web) }); }
    return links;
  }

  function render(){
    const $grid=document.querySelector('.grid');
    $grid.innerHTML='';
    MEMBERS.forEach((m,idx)=>{
      const card=document.createElement('div'); card.className='card';
      const bar=document.createElement('div'); bar.className='bar';
      const tag=document.createElement('div'); tag.className='tag'; tag.textContent=`#${String(idx+1).padStart(2,'0')}`;
      const openall=document.createElement('button'); openall.className='openall'; openall.textContent='このメンバーのリンクを一括で開く';
      const links=linksetFor(m);
      openall.onclick=()=>{ links.forEach((lnk)=>{ if(lnk.key==='ig'){window.open(`https://www.instagram.com/${m.ig}/`,'_blank');} else if(lnk.key==='tt'){window.open(`https://www.tiktok.com/@${m.tiktok}`,'_blank');} else{window.open(lnk.href,'_blank');} }); };
      bar.appendChild(tag); bar.appendChild(openall);

      const head=document.createElement('div'); head.className='head';
      const av=document.createElement('img'); av.className='avatar'; av.alt=m.display; av.src=m.avatar;
      const names=document.createElement('div'); names.className='names';
      const d=document.createElement('div'); d.className='display'; d.textContent=m.display;
      const h=document.createElement('div'); h.className='handle'; h.textContent=m.aka?`@${m.aka}`:'';
      names.appendChild(d); names.appendChild(h);
      head.appendChild(av); head.appendChild(names);

      const btns=document.createElement('div'); btns.className='btns';
      links.forEach(lnk=>{ const a=document.createElement('a'); a.className='btn'; a.href=lnk.href; a.onclick=(e)=>{e.preventDefault();lnk.open(e);}; a.innerHTML=icon(lnk.key)+'<span>'+lnk.label+'</span>'; btns.appendChild(a); });

      card.appendChild(bar); card.appendChild(head); card.appendChild(btns); $grid.appendChild(card);
    });
  }

  function icon(key){
    const svgs={
      x:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4l16 16M20 4L4 20"/></svg>',
      ig:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><circle cx="17.5" cy="6.5" r="1.5"/></svg>',
      tt:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3v6a5 5 0 1 1-5 5"/><path d="M15 3c1.5 2 3.5 3 6 3"/></svg>'
    };
    return svgs[key]||'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg>'
  }

  function switchTab(tab){
    const container=document.querySelector('.grid');
    container.innerHTML='';
    if(tab==='follow'){ render(); }
    else if(tab==='news'){ container.innerHTML='<p>お知らせ準備中...</p>'; }
    else if(tab==='schedule'){ container.innerHTML='<p>スケジュール準備中...</p>'; }
    else if(tab==='gallery'){ container.innerHTML='<p>ギャラリー準備中...</p>'; }
  }

  document.addEventListener('DOMContentLoaded',()=>{
    render();
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        switchTab(btn.dataset.tab);
      });
    });
  });
</script>
</head>
<body>
  <div class="version">Version 2.11</div>
  <div class="wrap">
    <header>
      <h1>公式SNSまとめ（メンバー別）</h1>
      <div class="note">1画面で各SNSのフォロー/登録ページを開けます。スマホはアプリDeepLink、未インストール時はWebに切替。</div>
    </header>

    <div class="tabs">
      <div class="tab active" data-tab="follow">フォロー</div>
      <div class="tab" data-tab="news">お知らせ</div>
      <div class="tab" data-tab="schedule">スケジュール</div>
      <div class="tab" data-tab="gallery">ギャラリー</div>
    </div>

    <div class="grid"><!-- JSで描画 --></div>

    <footer>
      ※ 一部SNSは自動フォローを許可していないため、確認画面が表示されます。<br>
      ※ 「このメンバーのリンクを一括で開く」はブラウザのポップアップ制限に影響される場合があります。
    </footer>
  </div>
</body>
</html>


