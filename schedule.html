<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« | Dura Moon</title>
  <link rel="stylesheet" href="assets/common.css">
  <link rel="icon" type="image/png" href="/duramoon/favicon.png" />

  <style>
    .wrap { max-width: 1100px; margin: 0 auto; padding: 24px; }

    header { margin-bottom: 12px; }
    .section-title {
      display:flex; align-items:center; gap:10px;
      margin: 12px 0 4px;
      font-size:1.25rem;
    }
    .section-title .icon { font-size:22px; }
    .note { color:#d1d5db; font-size:.9rem; margin: 0 0 4px; }
    .nav { margin-top: 4px; }
    .nav .btn.gcal{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(15,23,42,.8);
      color:#e5e7eb; font-size:.9rem; text-decoration:none;
    }

    @media (max-width: 640px){
      header { text-align:center; }
      .section-title {
        justify-content:center;
        font-size:1.1rem;
      }
      .note { font-size:.85rem; }
      .nav { display:flex; justify-content:center; }
      .nav .btn.gcal { font-size:.85rem; padding:5px 10px; }
    }

    /* ====== æœˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ ====== */
    .cal-wrapper{
      margin: 16px 0 18px;
      padding: 14px 14px 10px;
      border-radius: 16px;
      background: rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.7);
    }
    .cal-header{
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom:10px;
    }
    .cal-title{
      font-weight:600; color:#e5e7eb; font-size:.95rem;
    }
    .cal-nav-btn{
      border:none; background:rgba(15,23,42,1);
      color:#e5e7eb; border-radius:999px;
      padding:4px 9px; font-size:.85rem; cursor:pointer;
      border:1px solid rgba(148,163,184,.7);
    }
    .cal-nav-btn:hover{
      background:rgba(30,64,175,.9);
    }
    .cal-grid{
      display:grid;
      grid-template-columns: repeat(7, minmax(0,1fr));
      gap:4px;
      font-size:.8rem;
    }
    .cal-weekday{
      text-align:center; padding:4px 0;
      color:#9ca3af;
    }
    .cal-day{
      min-height: 38px;
      display:flex; align-items:stretch; justify-content:stretch;
    }
    .cal-day button{
      width:100%; border-radius:10px;
      border:1px solid rgba(31,41,55,.9);
      background:rgba(15,23,42,.95);
      color:#e5e7eb;
      font-size:.8rem;
      padding:4px 4px 3px;
      text-align:left;
      cursor:pointer;
      display:flex; flex-direction:column; gap:3px;
    }
    .cal-day button:hover{
      border-color:rgba(129,140,248,1);
      box-shadow:0 0 0 1px rgba(129,140,248,.6);
    }
    .cal-num{
      font-weight:600;
    }
    .cal-dot-row{
      display:flex; gap:3px; margin-top:1px;
    }
    .cal-dot{
      width:5px; height:5px; border-radius:999px;
      background:#facc15;
    }
    .cal-day.sun button .cal-num{ color:#fca5a5; }
    .cal-day.sat button .cal-num{ color:#bfdbfe; }

    .cal-day.empty button{
      visibility:hidden;
      pointer-events:none;
    }

    .cal-day.today button{
      border-color:#facc15;
      box-shadow:0 0 0 1px rgba(250,204,21,.6);
      background:rgba(30,64,175,.9);
    }

    .cal-day.has-event button{
      border-color:rgba(129,140,248,.8);
    }

    .events { display: grid; grid-template-columns: 1fr; gap: 14px; }

    @media (min-width: 760px) {
      .events { grid-template-columns: 1fr; }
    }

    .event-card{
      position: relative;
      border-radius: 16px;
      padding: 18px 16px 14px;
      background: rgba(15,23,42,.9);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(148,163,184,.4);
      overflow: hidden;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .event-card:hover{
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(0,0,0,.35);
      border-color: rgba(248,250,252,.6);
    }
    .event-card.pulse{
      animation:pulse 0.8s ease-out 1;
    }
    @keyframes pulse{
      0%{ box-shadow:0 0 0 0 rgba(250,204,21,.8); }
      100%{ box-shadow:0 0 0 16px rgba(250,204,21,0); }
    }

    .event-head{ display:flex; align-items:flex-start; gap: 12px; }
    .event-title{
      font-weight:700; font-size:1.15rem; line-height:1.35; margin:0 0 4px;
      letter-spacing:.2px; color:#e5e7eb;
    }
    .event-meta{
      color:#9ca3af; font-size:.92rem;
      display:flex; align-items:center; gap:8px; flex-wrap:wrap;
    }
    .pill{
      background: rgba(15,23,42,1);
      border:1px solid rgba(148,163,184,.55);
      padding:6px 10px; border-radius:999px;
    }
    .dot { width:6px; height:6px; border-radius:50%; background:rgba(148,163,184,.9); display:inline-block; }

    .event-body{ margin-top:10px; color:#e5e7eb; font-size:.96rem; }
    .event-desc{ color:#d1d5db; opacity:.95; }

    .btns{ display:flex; flex-wrap:wrap; gap:10px; margin-top:14px; }
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:9px 14px; border-radius:12px;
      border:1px solid rgba(148,163,184,.7);
      color:#f9fafb; text-decoration:none; font-weight:700; letter-spacing:.2px;
      background: rgba(15,23,42,.9);
      font-size:.92rem;
      cursor:pointer;
      transition: filter .15s ease, transform .15s ease, box-shadow .15s ease;
    }
    .btn:hover{
      filter: brightness(1.06);
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(0,0,0,.45);
    }
    .btn.ticket{
      background: linear-gradient(135deg, #ec4899, #8b5cf6);
      border-color: transparent;
    }
    .btn.site{
      background: linear-gradient(135deg, #22c1c3, #3b82f6);
      border-color: transparent;
    }
    .btn.map{
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border-color: transparent;
    }
    .btn.gcal{
      background: rgba(15,23,42,.95);
    }

    .countdown{
      display:inline-flex; align-items:center; gap:6px;
      padding:4px 10px; border-radius:999px; font-size:.88rem; font-weight:700;
      background: rgba(250,204,21,.08); color:#facc15;
      border:1px solid rgba(250,204,21,.5);
    }

    .empty{
      color:#dbe2f3; opacity:.85; padding:18px 16px; border-radius:14px;
      border:1px dashed rgba(148,163,184,.7); background: rgba(15,23,42,.85)
    }

    .event-flyer{
      margin-top: 10px;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(148,163,184,.8);
    }
    .event-flyer img{
      display:block;
      width:100%;
      height:auto;
    }

    .event-note{
      margin-top: 8px;
      padding: 8px 10px;
      border-radius: 10px;
      background: rgba(250,250,210,.04);
      border: 1px dashed rgba(250,250,210,.6);
      font-size: .9rem;
      color: #fef9c3;
    }

    .event-master{
      border: 2px solid transparent !important;
      background: rgba(113,63,18,.5);
      border-radius: 18px;
      position: relative;
      transform: scale(1.01);
    }
    .event-master::before{
      content:"";
      position:absolute;
      inset:0;
      padding:2px;
      border-radius:18px;
      background:linear-gradient(135deg,#facc15,#f97316,#fbbf24);
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
              mask-composite:exclude;
      pointer-events:none;
    }
    .event-master .event-title{
      color:#fef9c3 !important;
      font-weight:800;
    }

    .event-important{
      border: 2px solid transparent !important;
      background: rgba(127,29,29,.55);
      border-radius: 18px;
      position: relative;
    }
    .event-important::before{
      content:"";
      position:absolute;
      inset:0;
      padding:2px;
      border-radius:18px;
      background:linear-gradient(135deg,#f97373,#ef4444,#fb7185);
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
              mask-composite:exclude;
      pointer-events:none;
    }
    .event-important .event-title{
      color:#fecaca !important;
      font-weight:700;
    }

    .chip-link{
      display:inline-flex; align-items:center; gap:4px;
      padding:2px 6px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.6);
      background:rgba(15,23,42,.9);
      font-size:.85rem;
      color:#e5e7eb;
      text-decoration:none;
      margin:2px 2px;
    }
    .chip-link:hover{
      background:rgba(30,64,175,.9);
    }
    .chip-ic{
      width:14px; height:14px; border-radius:3px;
    }
    .chip-tag{
      color:#bfdbfe;
      text-decoration:none;
      padding:0 2px;
    }
    .chip-tag:hover{
      text-decoration:underline;
    }
    .chip-at{
      color:#a5b4fc;
      text-decoration:none;
      padding:0 2px;
    }
    .chip-at:hover{
      text-decoration:underline;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 class="section-title">
        <span class="icon">ğŸ“…</span>
        ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
      </h1>
      <p class="note">ãƒ‰ã‚¥ãƒ©ãƒ»ãƒ ãƒ¼ãƒ³ã®ãƒ©ã‚¤ãƒ– / ã‚¤ãƒ™ãƒ³ãƒˆäºˆå®šä¸€è¦§ã§ã™ã€‚</p>
      <nav class="nav">
        <a class="btn gcal" href="./">SNSã¾ã¨ã‚ã¸æˆ»ã‚‹</a>
      </nav>
    </header>

    <section id="month">
      <div class="cal-wrapper">
        <div id="month-calendar"></div>
      </div>
    </section>

    <section id="list" style="margin-top:12px">
      <div id="events" class="events"></div>
    </section>
  </div>

  <script src="assets/config.js"></script>
  <script>
    const fmtJP = (iso) => {
      const d = new Date(iso);
      return new Intl.DateTimeFormat('ja-JP', {
        year:'numeric', month:'numeric', day:'numeric',
        weekday:'short', hour:'2-digit', minute:'2-digit',
        hour12:false
      }).format(d);
    };
    const fmtHM = (iso) => {
      const d = new Date(iso);
      return new Intl.DateTimeFormat('ja-JP', { hour:'2-digit', minute:'2-digit', hour12:false }).format(d);
    };
    const daysLeft = (iso) => {
      const now = new Date(); const t = new Date(iso);
      const ms = t.setHours(0,0,0,0) - now.setHours(0,0,0,0);
      return Math.floor(ms / (1000*60*60*24));
    };

    // ğŸŒ / ğŸŒ™ åˆ¤å®š
    function bandOfDay(iso){
      const d = new Date(iso);
      const h = d.getHours();
      if (isNaN(h)) return '';
      // 17æ™‚å‰ â†’ æ˜¼å¸¯ / 17æ™‚ä»¥é™ â†’ å¤œå¸¯
      if (h < 17) return 'ğŸŒ æ˜¼å¸¯';
      return 'ğŸŒ™ å¤œå¸¯';
    }

    function getLocalDateKey(iso) {
      const d = new Date(iso);
      const y = d.getFullYear();
      const m = ('0'+(d.getMonth()+1)).slice(-2);
      const dd = ('0'+d.getDate()).slice(-2);
      return `${y}-${m}-${dd}`;
    }

    function parseFields(desc='') {
      const fields = {};
      const lines = (desc || '').split(/\r?\n/);
      for (const line of lines) {
        const m = line.match(/^\s*(ticket|url|price|venue|live|photo|bonus|note|flyer)\s*:\s*(.+)\s*$/i);
        if (m) fields[m[1].toLowerCase()] = m[2].trim();
      }
      return fields;
    }

    function parsePriority(desc){
      if(!desc) return null;
      if(desc.includes('!priority:master')) return 'master';
      if(desc.includes('!priority:important')) return 'important';
      return null;
    }

    function googleEventUrl(e) {
      return e.htmlLink || `https://calendar.google.com/calendar/u/0/r/eventedit?text=${encodeURIComponent(e.summary||'')}`;
    }

    function shortenUrl(u) {
      try {
        const url = new URL(u);
        let path = url.pathname.replace(/\/$/, '');
        if (path.length > 24) path = path.slice(0, 24) + 'â€¦';
        return `${url.host}${path ? path : ''}`;
      } catch { return u; }
    }
    function faviconFor(u) {
      try {
        const host = new URL(u).host;
        return `https://www.google.com/s2/favicons?domain=${host}&sz=16`;
      } catch { return ''; }
    }

    function linkifyText(text) {
      if (!text) return '';
      const esc = (s)=>s.replace(/[&<>]/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;' }[m]));
      let html = esc(text).replace(/\r?\n/g, '<br>');

      html = html.replace(/https?:\/\/[^\s<>()]+/g, (m) => {
        let host = '';
        try { host = new URL(m).host; } catch {}
        const show = shortenUrl(m);
        const fav  = faviconFor(m);
        const isX  = /(^|\.)x\.com$|(^|\.)twitter\.com$/i.test(host);
        const icon = isX ? 'ğŸ•Šï¸' : (fav ? `<img src="${fav}" alt="" class="chip-ic">` : 'ğŸ”—');
        return `<a class="chip-link" href="${m}" target="_blank" rel="noopener">${icon}<span>${show}</span></a>`;
      });

      html = html.replace(/(^|[\s>])#([\p{L}\p{N}_]+)\b/gu, (_m, pre, tag) => {
        const url = `https://x.com/hashtag/${encodeURIComponent(tag)}`;
        return `${pre}<a class="chip-tag" href="${url}" target="_blank" rel="noopener">#${tag}</a>`;
      });

      html = html.replace(/(^|[\s>])@([A-Za-z0-9_]{1,15})\b/g, (_m, pre, id) => {
        const url = `https://x.com/${id}`;
        return `${pre}<a class="chip-at" href="${url}" target="_blank" rel="noopener">@${id}</a>`;
      });

      return html;
    }

    let MONTH_STATE = new Date();
    let EVENT_MAP = {};

    function renderMonthCalendar() {
      const root = document.getElementById('month-calendar');
      if(!root) return;

      const base = new Date(MONTH_STATE.getFullYear(), MONTH_STATE.getMonth(), 1);
      const year = base.getFullYear();
      const month = base.getMonth();
      const first = new Date(year, month, 1);
      const startW = first.getDay();
      const daysInMonth = new Date(year, month+1, 0).getDate();

      const today = new Date();
      const todayKey = getLocalDateKey(today.toISOString());

      const monthLabel = `${year}å¹´ ${month+1}æœˆ`;

      let html = `
        <div class="cal-header">
          <button class="cal-nav-btn" data-cal-prev>&lt;</button>
          <div class="cal-title">${monthLabel}</div>
          <button class="cal-nav-btn" data-cal-next>&gt;</button>
        </div>
        <div class="cal-grid">
          <div class="cal-weekday">æ—¥</div>
          <div class="cal-weekday">æœˆ</div>
          <div class="cal-weekday">ç«</div>
          <div class="cal-weekday">æ°´</div>
          <div class="cal-weekday">æœ¨</div>
          <div class="cal-weekday">é‡‘</div>
          <div class="cal-weekday">åœŸ</div>
      `;

      let cellIndex = 0;
      for(let i=0;i<startW;i++){
        html += `
          <div class="cal-day empty">
            <button type="button"><span class="cal-num"></span></button>
          </div>
        `;
        cellIndex++;
      }

      for(let day=1; day<=daysInMonth; day++){
        const dateObj = new Date(year, month, day);
        const key = getLocalDateKey(dateObj.toISOString());
        const hasEvent = !!EVENT_MAP[key] && EVENT_MAP[key].length > 0;
        const isToday = key === todayKey;
        const col = cellIndex % 7;
        const sunOrSat = col === 0 ? 'sun' : (col === 6 ? 'sat' : '');
        const dayClasses = ['cal-day'];
        if (sunOrSat) dayClasses.push(sunOrSat);
        if (isToday) dayClasses.push('today');
        if (hasEvent) dayClasses.push('has-event');

        const dots = hasEvent ? '<div class="cal-dot-row"><span class="cal-dot"></span></div>' : '';

        html += `
          <div class="${dayClasses.join(' ')}">
            <button type="button" data-date="${key}">
              <span class="cal-num">${day}</span>
              ${dots}
            </button>
          </div>
        `;
        cellIndex++;
      }

      while(cellIndex % 7 !== 0){
        html += `
          <div class="cal-day empty">
            <button type="button"><span class="cal-num"></span></button>
          </div>
        `;
        cellIndex++;
      }

      html += '</div>';
      root.innerHTML = html;

      root.querySelector('[data-cal-prev]')?.addEventListener('click', () => {
        MONTH_STATE = new Date(MONTH_STATE.getFullYear(), MONTH_STATE.getMonth()-1, 1);
        renderMonthCalendar();
      });
      root.querySelector('[data-cal-next]')?.addEventListener('click', () => {
        MONTH_STATE = new Date(MONTH_STATE.getFullYear(), MONTH_STATE.getMonth()+1, 1);
        renderMonthCalendar();
      });

      root.querySelectorAll('button[data-date]').forEach(btn => {
        btn.addEventListener('click', () => {
          const key = btn.getAttribute('data-date');
          scrollToDateCard(key);
        });
      });
    }

    function scrollToDateCard(dateKey){
      const card = document.querySelector(`.event-card[data-date="${dateKey}"]`);
      if(card){
        card.scrollIntoView({ behavior:'smooth', block:'start' });
        card.classList.add('pulse');
        setTimeout(()=>card.classList.remove('pulse'), 900);
      }else{
        alert('ã“ã®æ—¥ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚');
      }
    }

    async function loadEvents() {
      const eventsEl = document.getElementById('events');
      eventsEl.innerHTML = 'èª­ã¿è¾¼ã¿ä¸­â€¦';

      const timeMin = new Date();
      timeMin.setHours(0,0,0,0);

      const url = new URL(`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(CONFIG.CAL_ID)}/events`);
      url.searchParams.set('key', CONFIG.API_KEY);
      url.searchParams.set('singleEvents', 'true');
      url.searchParams.set('orderBy', 'startTime');
      url.searchParams.set('timeMin', timeMin.toISOString());
      url.searchParams.set('maxResults', '50');

      try{
        const res = await fetch(url);
        if (!res.ok) {
          eventsEl.innerHTML = `<div class="empty">èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚APIã‚­ãƒ¼ã®åˆ¶é™ï¼ˆHTTPãƒªãƒ•ã‚¡ãƒ©ãƒ¼ï¼‰ã¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®å…¬é–‹è¨­å®šã‚’ã”ç¢ºèªãã ã•ã„ã€‚</div>`;
          return;
        }
        const data = await res.json();
        const items = (data.items || []).filter(e => !e.status || e.status !== 'cancelled');

        if (!items.length) {
          eventsEl.innerHTML = `<div class="empty">ä»Šå¾Œã®äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</div>`;
          EVENT_MAP = {};
          renderMonthCalendar();
          return;
        }

        eventsEl.innerHTML = '';
        EVENT_MAP = {};

        for (const e of items) {
          const start = e.start?.dateTime || (e.start?.date ? e.start.date + 'T00:00:00' : null);
          const end   = e.end?.dateTime   || (e.end?.date   ? e.end.date   + 'T23:59:59' : null);
          if (!start) continue;

          const dateKey = getLocalDateKey(start);
          if(!EVENT_MAP[dateKey]) EVENT_MAP[dateKey] = [];
          EVENT_MAP[dateKey].push(e);

          const fields   = parseFields(e.description || '');
          const venue    = e.location || fields.venue || '';
          const price    = fields.price || '';
          const ticket   = fields.ticket || '';
          const site     = fields.url || '';
          const note     = fields.note || '';
          const flyer    = fields.flyer || '';
          const mapUrl   = venue ? `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(venue)}` : '';

          const d        = daysLeft(start);
          let countdown  = '';
          if (d >= 0) countdown = `<span class="countdown">â³ ã‚ã¨ ${d} æ—¥</span>`;

          const timeText = end ? `${fmtHM(start)} ã€œ ${fmtHM(end)}` : fmtHM(start);
          const band     = bandOfDay(start); // ğŸŒ / ğŸŒ™ åˆ¤å®š

          const card = document.createElement('article');
          card.className = 'event-card';
          card.dataset.date = dateKey;

          const priority = parsePriority(e.description || '');
          if(priority === 'master')    card.classList.add('event-master');
          if(priority === 'important') card.classList.add('event-important');

          const descHtml = linkifyText(e.description || '');

          card.innerHTML = `
            <div class="event-head">
              <div style="flex:1">
                <h3 class="event-title">
                  ${priority === 'master' ? 'ğŸ”¥ ä¸»å‚¬ãƒ©ã‚¤ãƒ–ï½œ ' : ''}
                  ${priority === 'important' ? 'ğŸ”¥ ' : ''}
                  ${e.summary || '(ç„¡é¡Œ)'}
                </h3>
                <div class="event-meta">
                  <span class="pill">ğŸ“… ${fmtJP(start)}</span>
                  <span class="dot"></span>
                  <span class="pill">ğŸ•’ ${timeText}</span>
                  ${band ? `<span class="dot"></span><span class="pill">${band}</span>` : ''}
                  ${venue ? `<span class="dot"></span><span class="pill">ğŸ“ ${venue}</span>` : ''}
                  ${price ? `<span class="dot"></span><span class="pill">ğŸ’´ ${price}</span>` : ''}
                  ${countdown ? `<span class="dot"></span>${countdown}` : ''}
                </div>
              </div>
            </div>

            ${flyer ? `
              <div class="event-flyer">
                <img src="${flyer}" alt="ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼ç”»åƒ" loading="lazy">
              </div>
            ` : ''}

            ${e.description ? `
              <div class="event-body">
                <div class="event-desc">${descHtml}</div>
              </div>
            ` : ''}

            ${note ? `<div class="event-note">ğŸ“ ${note}</div>` : ''}

            <div class="btns">
              ${ticket ? `<a class="btn ticket" href="${ticket}" target="_blank" rel="noopener">ğŸŸ ãƒã‚±ãƒƒãƒˆ</a>` : ''}
              ${site   ? `<a class="btn site"   href="${site}"   target="_blank" rel="noopener">ğŸ•Šï¸ å…¬å¼å‘ŠçŸ¥ãƒã‚¹ãƒˆã‚’è¦‹ã‚‹</a>` : ''}
              ${mapUrl ? `<a class="btn map"    href="${mapUrl}" target="_blank" rel="noopener">ğŸ“ Googleãƒãƒƒãƒ—</a>` : ''}
              <a class="btn gcal" href="${googleEventUrl(e)}" target="_blank" rel="noopener">ğŸ“† Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§é–‹ã</a>
            </div>
          `;
          eventsEl.appendChild(card);
        }

        renderMonthCalendar();

      }catch(err){
        console.error(err);
        eventsEl.innerHTML = `<div class="empty">èª­ã¿è¾¼ã¿æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</div>`;
        EVENT_MAP = {};
        renderMonthCalendar();
      }
    }

    loadEvents();
  </script>
</body>
</html>
